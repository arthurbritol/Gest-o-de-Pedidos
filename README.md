Código separado para melhor localização de erros e bugs.
